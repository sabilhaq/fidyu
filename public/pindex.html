<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FidYu</title>
  <link rel="stylesheet" href="stylesheets/main.css">
</head>

<body>
  <div class="index-container">
    <div class="sidebar">
      <div class="sidebar__header">
        <img class="sidebar__header__menu" src="images/menu.svg" alt="Sidebar Menu">
        <a class="sidebar__header__logo" href="#">
          <img src="images/fidyu-logo.svg" width="100" alt="Youtube Logo">
        </a>
      </div>

      <div class="sidebar__sections">
        <div class="sidebar__sections__section">
          <a href="#" class="active sidebar__sections__section__item">
            <img src="images/home.svg" alt="">
            Home
          </a>
          <a href="#" class="sidebar__sections__section__item">
            <img src="images/tabler-icon-box-model-2.svg" alt="">
            Your videos
          </a>
          <a href="#" class="sidebar__sections__section__item">
            <img src="images/tabler-icon-settings.svg" alt="">
            Setting
          </a>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="main__header">
        <div class="main__header__search">
          <form class="main__header__search__form" action="">
            <input class="main__header__search__form__input" type="search" name="search" id="search" placeholder="Search">

            <button class="main__header__search__form__button">
              <img src="images/magnify.svg" alt="">
            </button>
          </form>
        </div>

        <div class="main__header__icons">
          <div class="main__header__icons__channel">
            <img class="main__header__icons__channel__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">
          </div>
        </div>
      </div>

      <div class="main__categories">
        <div class="main__categories__category active">All</div>
        <div class="main__categories__category">Category 1</div>
        <div class="main__categories__category">Category 2</div>
        <div class="main__categories__category">Category 3</div>
        <div class="main__categories__category">Category 4</div>
        <div class="main__categories__category">Category 5</div>
        <div class="main__categories__category">Category 6</div>
        <div class="main__categories__category">Category 7</div>
        <div class="main__categories__category">Category 8</div>
        <div class="main__categories__category">Category 9</div>
      </div>

      <div class="main__videos">
        <div class="main__videos__section">
          <a href="watch.html" class="main__videos__section__video">
            <img class="main__videos__section__video__thumbnail" src="https://unsplash.it/250/150/?gravity=center&random" alt="">

            <div class="main__videos__section__video__metadata">
              <img class="main__videos__section__video__metadata__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">

              <div class="main__videos__section__video__metadata__texts">
                <div class="main__videos__section__video__metadata__texts__title">Video Title</div>
                <div class="main__videos__section__video__metadata__texts__channelname">Web Programming UNPAS</div>
                <div>
                  <span class="main__videos__section__video__metadata__texts__views">1.6M views</span>
                  <span class="main__videos__section__video__metadata__texts__point">&#9642;</span>
                  <span class="main__videos__section__video__metadata__texts__uploadtime">3 hours ago</span>
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="main__videos__section__video">
            <img class="main__videos__section__video__thumbnail" src="https://unsplash.it/250/150/?gravity=center&random" alt="">

            <div class="main__videos__section__video__metadata">
              <img class="main__videos__section__video__metadata__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">

              <div class="main__videos__section__video__metadata__texts">
                <div class="main__videos__section__video__metadata__texts__title">Video Title</div>
                <div class="main__videos__section__video__metadata__texts__channelname">Web Programming UNPAS</div>
                <div>
                  <span class="main__videos__section__video__metadata__texts__views">1.6M views</span>
                  <span class="main__videos__section__video__metadata__texts__point">&#9642;</span>
                  <span class="main__videos__section__video__metadata__texts__uploadtime">3 hours ago</span>
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="main__videos__section__video">
            <img class="main__videos__section__video__thumbnail" src="https://unsplash.it/250/150/?gravity=center&random" alt="">

            <div class="main__videos__section__video__metadata">
              <img class="main__videos__section__video__metadata__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">

              <div class="main__videos__section__video__metadata__texts">
                <div class="main__videos__section__video__metadata__texts__title">Video Title</div>
                <div class="main__videos__section__video__metadata__texts__channelname">Web Programming UNPAS</div>
                <div>
                  <span class="main__videos__section__video__metadata__texts__views">1.6M views</span>
                  <span class="main__videos__section__video__metadata__texts__point">&#9642;</span>
                  <span class="main__videos__section__video__metadata__texts__uploadtime">3 hours ago</span>
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="main__videos__section__video">
            <img class="main__videos__section__video__thumbnail" src="https://unsplash.it/250/150/?gravity=center&random" alt="">

            <div class="main__videos__section__video__metadata">
              <img class="main__videos__section__video__metadata__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">

              <div class="main__videos__section__video__metadata__texts">
                <div class="main__videos__section__video__metadata__texts__title">Video Title</div>
                <div class="main__videos__section__video__metadata__texts__channelname">Web Programming UNPAS</div>
                <div>
                  <span class="main__videos__section__video__metadata__texts__views">1.6M views</span>
                  <span class="main__videos__section__video__metadata__texts__point">&#9642;</span>
                  <span class="main__videos__section__video__metadata__texts__uploadtime">3 hours ago</span>
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="main__videos__section__video">
            <img class="main__videos__section__video__thumbnail" src="https://unsplash.it/250/150/?gravity=center&random" alt="">

            <div class="main__videos__section__video__metadata">
              <img class="main__videos__section__video__metadata__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">

              <div class="main__videos__section__video__metadata__texts">
                <div class="main__videos__section__video__metadata__texts__title">Video Title</div>
                <div class="main__videos__section__video__metadata__texts__channelname">Web Programming UNPAS</div>
                <div>
                  <span class="main__videos__section__video__metadata__texts__views">1.6M views</span>
                  <span class="main__videos__section__video__metadata__texts__point">&#9642;</span>
                  <span class="main__videos__section__video__metadata__texts__uploadtime">3 hours ago</span>
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="main__videos__section__video">
            <img class="main__videos__section__video__thumbnail" src="https://unsplash.it/250/150/?gravity=center&random" alt="">

            <div class="main__videos__section__video__metadata">
              <img class="main__videos__section__video__metadata__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">

              <div class="main__videos__section__video__metadata__texts">
                <div class="main__videos__section__video__metadata__texts__title">Video Title</div>
                <div class="main__videos__section__video__metadata__texts__channelname">Web Programming UNPAS</div>
                <div>
                  <span class="main__videos__section__video__metadata__texts__views">1.6M views</span>
                  <span class="main__videos__section__video__metadata__texts__point">&#9642;</span>
                  <span class="main__videos__section__video__metadata__texts__uploadtime">3 hours ago</span>
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="main__videos__section__video">
            <img class="main__videos__section__video__thumbnail" src="https://unsplash.it/250/150/?gravity=center&random" alt="">

            <div class="main__videos__section__video__metadata">
              <img class="main__videos__section__video__metadata__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">

              <div class="main__videos__section__video__metadata__texts">
                <div class="main__videos__section__video__metadata__texts__title">Video Title</div>
                <div class="main__videos__section__video__metadata__texts__channelname">Web Programming UNPAS</div>
                <div>
                  <span class="main__videos__section__video__metadata__texts__views">1.6M views</span>
                  <span class="main__videos__section__video__metadata__texts__point">&#9642;</span>
                  <span class="main__videos__section__video__metadata__texts__uploadtime">3 hours ago</span>
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="main__videos__section__video">
            <img class="main__videos__section__video__thumbnail" src="https://unsplash.it/250/150/?gravity=center&random" alt="">

            <div class="main__videos__section__video__metadata">
              <img class="main__videos__section__video__metadata__icon" src="https://unsplash.it/32/32/?gravity=center" alt="">

              <div class="main__videos__section__video__metadata__texts">
                <div class="main__videos__section__video__metadata__texts__title">Video Title</div>
                <div class="main__videos__section__video__metadata__texts__channelname">Web Programming UNPAS</div>
                <div>
                  <span class="main__videos__section__video__metadata__texts__views">1.6M views</span>
                  <span class="main__videos__section__video__metadata__texts__point">&#9642;</span>
                  <span class="main__videos__section__video__metadata__texts__uploadtime">3 hours ago</span>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <script>
    $(document).ready(function() {
      loadData()
    })

    const loadData = (param) => {
      let filter = `${param?.filter ? param?.filter : ""}`
      let page = `${param?.pageNext ? "&page=" + param.pageNext : ""}`
      let sortBy = `${param?.sortBy ? "&sort=" + param?.sortBy : ""}`
      let sortOrder = `${param?.sortOrder ? "&order=" + param?.sortOrder : ""}`

      let allQueryParams = filter + page + sortBy + sortOrder
      allQueryParams = allQueryParams.replace(/\?/g, "&")
      allQueryParams = allQueryParams.replace("&", "?")

      let url = `http://localhost:3000/videos/list${allQueryParams}`

      $.ajax({
        url
      }).done(function(data) {
        const options = {
          year: "numeric",
          month: "long",
          day: "numeric"
        }
        let htmlTbody = ""
        data.items.forEach(item => {
          let newDate = new Date(item.date_type)
          let formattedDate = newDate.toLocaleDateString("id-ID", options)

          htmlTbody += `
          <tr>
            <td>${item._id}</td>
            <td>${item.string_type}</td>
            <td>${item.integer_type}</td>
            <td>${item.float_type}</td>
            <td>${item.date_type ? formattedDate : "kosong"}</td>
            <td>${item.boolean_type}</td>
            <td>
              <button type="button" class="btn btn-success btn-edit" iditem="${item._id}">Edit</button>
              <button type="button" class="btn btn-danger btn-delete" iditem="${item._id}">Delete</button>
            </td>
          </tr>
          `
        })

        let htmlPagination = ""
        htmlPagination += `
          <li class="page-item ${data.pagination.currentPage == 1 || !data.pagination.currentPage ? "disabled" : ""}">
            <a data-page="${data.pagination.currentPage - 1}" class="page-link" href="${formatPage(data.filters, data.pagination.currentPage - 1, data.queryParams)}">Previous</a>
          </li>
        `
        for (let i = 1; i < data.pagination.totalPage + 1; i++) {
          htmlPagination += `
            <li class="page-item ${data.pagination.currentPage == i ? "active" : ""}" aria-current="page">
              <a data-page="${i}" id="changepage" data-param="${data.stringparam}" class="page-link" href="${formatPage(data.filters, i, data.queryParams)}">${i}</a>
            </li>
            `
        }
        htmlPagination += `
          <li class="page-item ${data.pagination.currentPage == data.pagination.totalPage ? "disabled" : ""}"">
            <a data-page="${data.pagination.currentPage + 1}" class="page-link" href="${formatPage(data.filters, data.pagination.currentPage + 1, data.queryParams)}">Next</a>
          </li>
        `

        let htmlThead = ""
        htmlThead += `
          <tr>
            <th class="sortthead" data-sort="_id,${data.sort},${data.order},${data.stringparam},${data.pagination.currentPage}">ID <i class="fa fa-sort" style="font-size:12px; cursor: pointer;"></i></th>
            <th class="sortthead" data-sort="string_type,${data.sort},${data.order},${data.stringparam},${data.pagination.currentPage}">String <i class="fa fa-sort" style="font-size:12px; cursor: pointer;"></i></th>
            <th class="sortthead" data-sort="integer_type,${data.sort},${data.order},${data.stringparam},${data.pagination.currentPage}">Integer <i class="fa fa-sort" style="font-size:12px; cursor: pointer;"></i></th>
            <th class="sortthead" data-sort="float_type,${data.sort},${data.order},${data.stringparam},${data.pagination.currentPage}">Float <i class="fa fa-sort" style="font-size:12px; cursor: pointer;"></i></th>
            <th class="sortthead" data-sort="date_type,${data.sort},${data.order},${data.stringparam},${data.pagination.currentPage}">Date <i class="fa fa-sort" style="font-size:12px; cursor: pointer;"></i></th>
            <th class="sortthead" data-sort="boolean_type,${data.sort},${data.order},${data.stringparam},${data.pagination.currentPage}">Boolean <i class="fa fa-sort" style="font-size:12px; cursor: pointer;"></i></th>
            <th>Actions</th>
          </tr>
        `

        let htmlBody = `
          <div class="container title-container mt-3">
            <h1>BREAD (Browser, Read, Edit, Add, Delete)</h1>
          </div>

          <div class="container filter-container py-3">
            <h2>Filters</h2>

            <form id="form-filter" action="" method="get">
              <input type="hidden" name="">


              <div class="row mb-3 align-items-center justify-content-between">
                <div class="col-auto">
                  <input type="checkbox" class="form-check-input" id="_idcheck">
                  <label class="form-check-label" for="_idcheck">ID</label>
                </div>
                <div class="col-auto w-75">
                  <input type="text" id="_id" class="form-control" placeholder="ID">
                </div>
              </div>

              <div class="row mb-3 align-items-center justify-content-between">
                <div class="col-auto">
                  <input type="checkbox" class="form-check-input" id="stringcheck">
                  <label class="form-check-label" for="stringcheck">String</label>
                </div>
                <div class="col-auto w-75">
                  <input type="text" id="string" class="form-control" placeholder="String">
                </div>
              </div>

              <div class="row mb-3 align-items-center justify-content-between">
                <div class="col-auto">
                  <input type="checkbox" class="form-check-input" id="integercheck">
                  <label class="form-check-label" for="integercheck">Integer</label>
                </div>
                <div class="col-auto w-75">
                  <input type="number" id="integer" class="form-control" placeholder="Integer">
                </div>
              </div>

              <div class="row mb-3 align-items-center justify-content-between">
                <div class="col-auto">
                  <input type="checkbox" class="form-check-input" id="floatcheck">
                  <label class="form-check-label" for="floatcheck">Float</label>
                </div>
                <div class="col-auto w-75">
                  <input type="number" id="float" class="form-control" placeholder="Float" step="any">
                </div>
              </div>

              <div class="row mb-3 align-items-center justify-content-between">
                <div class="col-auto input-checkbox-date pt-2 align-self-start">
                  <input type="checkbox" class="form-check-input" id="datecheck">
                  <label class="form-check-label" for="datecheck">Date</label>
                </div>
                <div class="col-auto input-date-container w-75">
                  <div class="w-25">
                    <input type="date" name="startdate" id="startdate" class="form-control input-date">
                    <div>to</div>
                    <input type="date" name="enddate" id="enddate" class="form-control input-date">
                  </div>
                </div>
              </div>

              <div class="row mb-3 align-items-center justify-content-between">
                <div class="col-auto">
                  <input type="checkbox" class="form-check-input" id="booleancheck">
                  <label class="form-check-label" for="booleancheck">Boolean</label>
                </div>
                <div class="col-auto w-75">
                  <select id="boolean" name="boolean" class="form-select" aria-label="Default select example">
                    <option value="" disabled selected hidden>Choose the boolean ...</option>
                    <option value="true">True</option>
                    <option value="false">False</option>
                  </select>
                </div>
              </div>

              <button class="btn btn-primary" type="submit">Search</button>
            </form>
          </div>


          <div class="container table-container">
            <table style="border-top: 1px solid #e7e7e7;" id="table-types" class="table table-striped table-hover">
              <thead style="border-bottom: 1px solid #e7e7e7 !important;">
                <tr style="border-bottom: 1px solid #e7e7e7 !important;">
                  <th style="border-bottom: 1px solid #e7e7e7 !important;">ID</th>
                  <th>String</th>
                  <th>Integer</th>
                  <th>Float</th>
                  <th>Date</th>
                  <th>Boolean</th>
                  <th>Actions</th>
                </tr>
              </thead>

              <tbody>

              </tbody>
            </table>

            <nav aria-label="...">
              <ul id="pagination-types" class="pagination">

              </ul>
            </nav>

            <button id="addpagebutton" class="btn btn-primary">Add</button>
          </div>
        `

        $('#pagecontainer').html(htmlBody)
        $('#table-types tbody').html(htmlTbody)
        $('#table-types thead').html(htmlThead)
        $('#pagination-types').html(htmlPagination)
      })
    }
  </script>
</body>

</html>